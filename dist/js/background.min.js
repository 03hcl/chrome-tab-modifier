chrome.runtime.onMessage.addListener(function(e,t){switch(e.action){case"setUnique":chrome.tabs.get(t.tab.id,function(t){if(void 0!==t){var n;chrome.tabs.query({},function(i){for(var o=0;o<i.length;o++)n=i[o],-1!==n.url.indexOf(e.url_fragment)&&n.id!==t.id&&chrome.tabs.executeScript(t.id,{code:"window.onbeforeunload = function () {};"},function(){chrome.tabs.remove(t.id)})})}});break;case"setPinned":chrome.tabs.update(t.tab.id,{pinned:!0});break;case"setMuted":chrome.tabs.update(t.tab.id,{muted:!0})}}),chrome.browserAction.onClicked.addListener(function(e){var t="html/options.min.html",n=chrome.extension.getURL(t),i=!1;chrome.tabs.query({},function(o){for(var r=0;r<o.length;r++)e=o[r],-1!==e.url.indexOf(n)&&(chrome.tabs.get(e.id,function(e){chrome.tabs.highlight({tabs:e.index})}),i=!0);i===!1&&chrome.tabs.create({url:t})})});