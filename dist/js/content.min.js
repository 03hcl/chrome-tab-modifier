var Tab=function(e,t,n){var l,o,i,r,c=null,u=null,d=null,a=null;for(var g in n)if(-1!==e.indexOf(g)){c=n[g].title||null,u=n[g].icon||null,d=n[g].pinned||null,a=n[g]["protected"]||null;break}return l=function(){null!==c&&(c=-1!==c.indexOf("{title}")?c.replace("{title}",t):c)},l(),o=function(){return c},i=function(){return u},r=function(){return d},getProtected=function(){return a},{getTitle:o,getIcon:i,getPinned:r,getProtected:getProtected}},w=window;chrome.runtime.sendMessage({method:"getSettings"},function(e){var t=e.data;if(void 0!==t){var n=new Tab(location.href,document.title,JSON.parse(t.settings));if(null!==n.getTitle()&&(document.title=n.getTitle()),n.getPinned()===!0&&chrome.runtime.sendMessage({method:"setPinned",tabId:t.tab_id}),null!==n.getIcon()){var l,o,i;l=document.querySelectorAll('head link[rel*="icon"]'),Array.prototype.forEach.call(l,function(e){e.parentNode.removeChild(e)}),o="{default}"===n.getIcon()?chrome.extension.getURL("/img/default_favicon.png"):n.getIcon(),i=document.createElement("link"),i.type="image/x-icon",i.rel="icon",i.href=o,document.getElementsByTagName("head")[0].appendChild(i)}n.getProtected()===!0&&(w.onbeforeunload=function(){return""})}});