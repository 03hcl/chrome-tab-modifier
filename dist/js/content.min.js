var w=window;chrome.storage.sync.get("tab_modifier",function(e){if(void 0!==e.tab_modifier){for(var t=e.tab_modifier,r=0;r<t.rules.length;r++)if(-1!==location.href.indexOf(t.rules[r].url_fragment)){rule=t.rules[r];break}if(null!==rule){var n,l,o;n=function(e){var t=document.querySelector(e),r="";return null!==t&&(r=t.innerText||t.textContent),r.trim()},l=function(e,t,r){return""===r?e:e.replace(t,r)},o=function(e){var t,r=rule.tab.title,o=r.match(/\{([^}]+)}/g);if(null!==o){var i,u;for(t=0;t<o.length;t++)i=o[t].substring(1,o[t].length-1),u=n(i),r=l(r,o[t],u)}if(null!==rule.tab.url_matcher)try{if(o=e.match(new RegExp(rule.tab.url_matcher),"g"),null!==o)for(t=0;t<o.length;t++)r=l(r,"$"+t,o[t])}catch(a){console.log(a)}return r},null!==rule.tab.title&&(document.title=o(location.href));var i,u=!1;if(i=new window.WebKitMutationObserver(function(e){u===!0?u=!1:e.forEach(function(){null!==rule.tab.title&&(document.title=o(location.href)),u=!0})}),i.observe(document.querySelector("head > title"),{subtree:!0,characterresponse:!0,childList:!0}),rule.tab.pinned===!0&&chrome.runtime.sendMessage({action:"setPinned"}),null!==rule.tab.icon){var a,c,f;a=document.querySelectorAll('head link[rel*="icon"]'),Array.prototype.forEach.call(a,function(e){e.parentNode.removeChild(e)}),c=-1===rule.tab.icon.indexOf("http")?chrome.extension.getURL("/img/"+rule.tab.icon):rule.tab.icon,f=document.createElement("link"),f.type="image/x-icon",f.rel="icon",f.href=c,document.getElementsByTagName("head")[0].appendChild(f)}rule.tab["protected"]===!0&&(w.onbeforeunload=function(){return""}),rule.tab.unique===!0&&chrome.runtime.sendMessage({action:"setUnique",url_fragment:rule.url_fragment}),rule.tab.muted===!0&&chrome.runtime.sendMessage({action:"setMuted"})}}});