var w=window;chrome.storage.local.get("tab_modifier",function(e){if(void 0!==e.tab_modifier){for(var t=e.tab_modifier,n=null,r=0;r<t.rules.length;r++)if(-1!==location.href.indexOf(t.rules[r].url_fragment)){n=t.rules[r];break}if(null!==n){var o,i,a;o=function(e){var t=document.querySelector(e),n="";return null!==t&&(n=t.innerText||t.textContent),n.trim()},i=function(e,t,n){return""===n?e:e.replace(t,n)},a=function(e){var t,r=n.tab.title,a=r.match(/\{([^}]+)}/g);if(null!==a){var l,c;for(t=0;t<a.length;t++)l=a[t].substring(1,a[t].length-1),c=o(l),r=i(r,a[t],c)}if(null!==n.tab.url_matcher)try{if(a=e.match(new RegExp(n.tab.url_matcher),"g"),null!==a)for(t=0;t<a.length;t++)r=i(r,"$"+t,a[t])}catch(u){console.log(u)}return r},null!==n.tab.title&&(document.title=a(location.href));var l,c=!1;if(l=new window.WebKitMutationObserver(function(e){c===!0?c=!1:e.forEach(function(){null!==n.tab.title&&(document.title=a(location.href)),c=!0})}),l.observe(document.querySelector("head > title"),{subtree:!0,characterresponse:!0,childList:!0}),n.tab.pinned===!0&&chrome.runtime.sendMessage({action:"setPinned"}),null!==n.tab.icon){var u,f,m;u=document.querySelectorAll('head link[rel*="icon"]'),Array.prototype.forEach.call(u,function(e){e.parentNode.removeChild(e)}),f=-1===n.tab.icon.indexOf("http")?chrome.extension.getURL("/img/"+n.tab.icon):n.tab.icon,m=document.createElement("link"),m.type="image/x-icon",m.rel="icon",m.href=f,document.getElementsByTagName("head")[0].appendChild(m)}n.tab["protected"]===!0&&(w.onbeforeunload=function(){return""}),n.tab.unique===!0&&chrome.runtime.sendMessage({action:"setUnique",url_fragment:n.url_fragment}),n.tab.muted===!0&&chrome.runtime.sendMessage({action:"setMuted"})}}});