var Tab=function(e,t,n){var l,i,r,u,o=null,a=null,c=null,d=null,g=null,f=null,m=null;for(var h in n)if(-1!==e.indexOf(h)){o=h,a=n[h].title||null,c=n[h].icon||null,d=n[h].pinned||null,g=n[h]["protected"]||null,f=n[h].unique||null,m=n[h].url_params||null;break}return l=function(){if(null!==a&&(a=-1!==a.indexOf("{title}")?a.replace("{title}",t):a),null!==m)for(var n in m){var l=e.match(m[n])||[],i=l[1]||"";a=a.replace("{"+n+"}",i)}},l(),getMatch=function(){return o},i=function(){return a},r=function(){return c},u=function(){return d},getProtected=function(){return g},getUnique=function(){return f},{getMatch:getMatch,getTitle:i,getIcon:r,getPinned:u,getProtected:getProtected,getUnique:getUnique}},w=window;chrome.runtime.sendMessage({method:"getSettings"},function(e){var t=e.data;if(void 0!==t){var n=new Tab(location.href,document.title,JSON.parse(t.settings));if(null!==n.getTitle()&&(document.title=n.getTitle()),n.getPinned()===!0&&chrome.runtime.sendMessage({method:"setPinned",tabId:t.tab_id}),null!==n.getIcon()){var l,i,r;l=document.querySelectorAll('head link[rel*="icon"]'),Array.prototype.forEach.call(l,function(e){e.parentNode.removeChild(e)}),i="{default}"===n.getIcon()?chrome.extension.getURL("/img/default_favicon.png"):n.getIcon(),r=document.createElement("link"),r.type="image/x-icon",r.rel="icon",r.href=i,document.getElementsByTagName("head")[0].appendChild(r)}n.getProtected()===!0&&(w.onbeforeunload=function(){return""}),n.getUnique()===!0&&chrome.runtime.sendMessage({method:"setUnique",match:n.getMatch(),tabId:t.tab_id})}});