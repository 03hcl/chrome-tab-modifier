var Tab=function(e,t,n){var i,l,o,r,u=null,c=null,a=null,d=null,g=null,f=null;for(var m in n)if(-1!==e.indexOf(m)){u=m,c=n[m].title||null,a=n[m].icon||null,d=n[m].pinned||null,g=n[m]["protected"]||null,f=n[m].unique||null;break}return i=function(){null!==c&&(c=-1!==c.indexOf("{title}")?c.replace("{title}",t):c)},i(),getMatch=function(){return u},l=function(){return c},o=function(){return a},r=function(){return d},getProtected=function(){return g},getUnique=function(){return f},{getMatch:getMatch,getTitle:l,getIcon:o,getPinned:r,getProtected:getProtected,getUnique:getUnique}},w=window;chrome.runtime.sendMessage({method:"getSettings"},function(e){var t=e.data;if(void 0!==t){var n=new Tab(location.href,document.title,JSON.parse(t.settings));if(null!==n.getTitle()&&(document.title=n.getTitle()),n.getPinned()===!0&&chrome.runtime.sendMessage({method:"setPinned",tabId:t.tab_id}),null!==n.getIcon()){var i,l,o;i=document.querySelectorAll('head link[rel*="icon"]'),Array.prototype.forEach.call(i,function(e){e.parentNode.removeChild(e)}),l="{default}"===n.getIcon()?chrome.extension.getURL("/img/default_favicon.png"):n.getIcon(),o=document.createElement("link"),o.type="image/x-icon",o.rel="icon",o.href=l,document.getElementsByTagName("head")[0].appendChild(o)}n.getProtected()===!0&&(w.onbeforeunload=function(){return""}),n.getUnique()===!0&&chrome.runtime.sendMessage({method:"setUnique",match:n.getMatch(),tabId:t.tab_id})}});