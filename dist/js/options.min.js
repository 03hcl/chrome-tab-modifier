var isValidJSON,getSettings,setSettings,showCurrentSettings,handleFileSelect;isValidJSON=function(e){try{JSON.parse(e)}catch(t){return!1}return!0},getSettings=function(){return localStorage.settings},setSettings=function(e){localStorage.settings=e},showCurrentSettings=function(){var e=document.getElementById("current_file");e.innerHTML=JSON.stringify(JSON.parse(getSettings()),null,4),document.getElementById("no_settings_found").style.display="none",document.getElementById("settings_found").style.display="block"},handleFileSelect=function(e){var t=this.files[0],n=new FileReader;n.onload=function(e){var t=e.target.result;t?isValidJSON(t)===!0?(setSettings(t),showCurrentSettings()):alert("Invalid JSON file. Please check it on jsonlint.com."):alert("An error has occurred. Please check your file."),document.getElementById("settings_file").value=""},n.readAsText(t)},handleLiveSettingsChange=function(e){27===e.which?(document.execCommand("undo"),e.target.blur()):13===e.which&&(e.preventDefault(),e.target.blur())},saveLiveSettings=function(e){var t=document.getElementById("current_file").textContent;isValidJSON(t)===!0?(setSettings(t),showCurrentSettings()):(document.execCommand("undo"),e.target.blur())},document.getElementById("current_file").addEventListener("keydown",handleLiveSettingsChange,!0),document.getElementById("current_file").addEventListener("blur",saveLiveSettings,!0),void 0!==getSettings()?showCurrentSettings():(document.getElementById("settings_found").style.display="none",document.getElementById("no_settings_found").style.display="block"),document.getElementById("settings_file").addEventListener("change",handleFileSelect,!1);